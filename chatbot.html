<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini AI Chatbot</title>
    <link rel="stylesheet" href="style_mobile.css">
    <link rel="stylesheet" href="style_pc.css">
    <link rel="stylesheet" href="style_nav.css">
    <link rel="stylesheet" href="style_tablet.css">
    <link rel="stylesheet" href="darkmode.css">
    <style>
        body{
            margin-bottom: 10vh;
        }
        #chat-container {
            border-radius: 20px;
            width: 90vw;
            margin: 20px auto;
            border: 1px solid #ccc;
            padding: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        #chat-box {
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
            height: 45vh;
            text-align: left;
        }
        #input-box {
            width: 90vw;
        }
        #user-input {
            width: 70%;
            border-radius: 20px;
            padding: 15px 5px;
            border: 1px solid;
            background-color: #cccccc27;
        }
        #send-button {
            font-size: 1.3rem;
            border-radius: 10px;
            padding: 5px 10px;
            cursor: pointer;
            border: none;
            margin-left: 5px;
            text-transform: uppercase;
            color: white;
            background-color: var(--color);
        }
        .res{
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          align-items: center;
        }
        .suggested-response {
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 1.1rem;
            margin: 7px 5px; 
            border: none;
            cursor: pointer;
            background-color: #cccccc37;
            box-shadow: rgba(5, 5, 5, 0.2) 0px 7px 29px 0px;
              }
        .encrypt{
            border-radius: 20px;
            margin: 0 auto;
            width: 80vw;
            display: none;
            padding: 20px;
            box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
        }
        .encrypt input{
            width: 50vw;
            margin: 5px 30px;
            padding: 7px;
            border-radius: 10px;
            border: none;
            background-color: #cccccc37;
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
        }

        .collapsible{
            border: none;
            font-size: 2rem;
            position: fixed;
            display: grid;
            place-items: center;
            height: 40px;
            width: 40px;
            top: 100px;
            border-radius: 50%;
            left: 10px;
            color: #ccc;
            background-color: var(--color);
        }
        .collapsible:active{
            background-color: black;
            color: white;
        }
        .encrypt>button{
            padding: 5px;
            border: none;
            border-radius: 5px;
            margin: 10px;
        }
        .encrypt button:hover{
            background-color: black;
            color: white;
        }

    </style>
</head>
<body>
    <div class="logopic">
        <img src="https://drive.google.com/uc?id=1vSq4wpb4akw42tVeH8rwAFKmT0yjvbbJ" alt="">
             <ul>
                <li><a href="index.html"><ion-icon name="home-outline"></ion-icon></a></li>
                <li><a href="tel:+8801816267777"><ion-icon name="call-outline"></ion-icon></a></li>
                <li><a href=""><ion-icon name="qr-code-outline"></ion-icon></a></li>
                <li><a class="dark-mode-toggle" href="#"><ion-icon name="contrast-outline"></ion-icon></a></li>
             </ul>
      </div>
    
    
        <!--navbar-->
        <nav>
        <div class="navigation">
            <ul>
              <li class="list active">
                <a href="index.html">
                  <span class="icon" id="a1">
                    <ion-icon name="home-outline"></ion-icon>
                  </span>
                  <span class="text">Home</span>
                </a>
              </li>
              <li class="list">
                <a href="member.html">
                  <span class="icon">
                    <ion-icon name="people-outline"></ion-icon>
                  </span>
                  <span class="text">Profile</span>
                </a>
              </li>
              <li class="list">
                <a href="contact.html">
                  <span class="icon">
                    <ion-icon name="chatbubble-outline"></ion-icon>
                  </span>
                  <span class="text">Message</span>
                </a>
              </li>
              <li class="list">
                <a href="post.html">
                  <span class="icon">
                    <ion-icon name="albums-outline"></ion-icon>
                  </span>
                  <span class="text">Photos</span>
                </a>
              </li>
              <li class="list">
                <a href="login.html">
                  <span class="icon">
                    <ion-icon name="log-in-outline"></ion-icon>
                  </span>
                  <span class="text">Settings</span>
                </a>
              </li>
            </ul>
          </div>
        </nav>
        <!--navbar End-->

<h2>ChatBot</h2>

<div id="chat-container">
    <div id="chat-box"></div>
    <!-- Add suggested responses as buttons -->
<div class="res">
  <button class="suggested-response" onclick="addSuggestedResponse('কি কি করতে পারো?')">কি কি করতে পারো?</button>
  <button class="suggested-response" onclick="addSuggestedResponse('উদ্যোগ কি?')">উদ্যোগ কি?</button>
  <button class="suggested-response" onclick="addSuggestedResponse('মূলনীতি')">মূলনীতি</button>
  <button class="suggested-response" onclick="addSuggestedResponse('রক্ত দেওয়ার উপকারিতা কি?')">রক্ত দেওয়ার উপকারিতা কি?</button>


  
</div>
    <div id="input-box">
        <input type="text" id="user-input" placeholder="Type your message...">
        <button id="send-button" onclick="sendMessage()">Send</button>
    </div>
</div>




    <!-- Input fields for users to add new responses -->
    <button type="button" class="collapsible"><a style="text-decoration: none; color: white;" href="#ssa"><ion-icon name="cog-outline"></ion-icon></a></button>
    <div class="encrypt" id="ssa">
        <input type="text" id="new-response" placeholder="Your KEY">
        <input type="text" id="new-answer" placeholder="Your Encyption">
        <button class="abii" onclick="addNewResponse()">Encrypt It</button>
        <button onclick="clearAndRestoreResponses()">Clear All Data</button>
        <div class="emer">
            <h3 >INFORM US FOR FIXING BUG</h3>
        </div>
    </div>



    <script src="chatbot.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

<script>

  //collapse
  var coll = document.getElementsByClassName("collapsible");
  var i;
  
  for (i = 0; i < coll.length; i++) {
    coll[i].addEventListener("click", function() {
      this.classList.toggle("active");
      var content = this.nextElementSibling;
      if (content.style.display === "block") {
        content.style.display = "none";
      } else {
        content.style.display = "block";
      }
    });
  }


 
//moreeeee

const darkModeToggles = document.querySelectorAll('.dark-mode-toggle');
const body = document.body;

// Check if the user's dark mode preference is stored
if (localStorage.getItem('darkMode') === 'enabled') {
    enableDarkMode();
}

darkModeToggles.forEach(toggle => {
    toggle.addEventListener('click', () => {
        if (body.classList.contains('dark-mode')) {
            disableDarkMode();
        } else {
            enableDarkMode();
        }
    });
});

function enableDarkMode() {
    body.classList.add('dark-mode');
    localStorage.setItem('darkMode', 'enabled');
}

function disableDarkMode() {
    body.classList.remove('dark-mode');
    localStorage.setItem('darkMode', 'disabled');
}



//colour Picker

function changeColor(newColor) {
    document.documentElement.style.setProperty('--color', newColor);
    localStorage.setItem('mainColor', newColor);
}

// Check if there is a saved color in local storage and apply it
const savedColor = localStorage.getItem('mainColor');
if (savedColor) {
    changeColor(savedColor);
}



//chatbot

// Function to send user message and get a response
function sendMessage() {
    const userInput = document.getElementById("user-input");
    const chatBox = document.getElementById("chat-box");

    // Get user input
    const userMessage = userInput.value;

    // Display user message in the chat box
    chatBox.innerHTML += `<div style="text-align:center; border:var(--color) solid; padding:5px; margin:10px; width:45vw; border-radius:20px; float:right; overflow:hidden;" ><strong></strong> ${userMessage}</div>`;

    // Get chatbot response
    const botResponse = getBotResponse(userMessage);

    // Display chatbot response in the chat box
    chatBox.innerHTML += `<div style="border:var(--color) solid; padding:5px; margin:10px; width:45vw; border-radius:20px; float:left;" ><strong></strong> ${botResponse}</div>`;

    // Clear the user input field
    userInput.value = "";

    // Scroll to the bottom of the chat box
    chatBox.scrollTop = chatBox.scrollHeight;
}

// Function to get a response from the chatbot
function getBotResponse(userMessage) {
    // Convert user message to lowercase for case-insensitive matching
    const lowerCaseMessage = userMessage.toLowerCase();

    // Check if the user message matches any fixed responses
    for (const key in fixedResponses) {
        if (lowerCaseMessage.includes(key)) {
            return fixedResponses[key];
        }
    }

    // Check if the user message matches any predefined responses
    for (const key in responses) {
        if (lowerCaseMessage.includes(key)) {
            return responses[key];
        }
    }

    // If no match is found, return the default response
    return responses["default"];
}

// Function to handle suggested responses
function addSuggestedResponse(suggestedResponse) {
    const userInput = document.getElementById("user-input");
    userInput.value = suggestedResponse;
}

// Function to clear all user responses and restore default responses
function clearAndRestoreResponses() {
    responses = JSON.parse(JSON.stringify(fixedResponses));
    localStorage.setItem('chatbotResponses', JSON.stringify(responses));
    console.log("Default responses restored");
}

// Function to add a new response provided by the user
function addNewResponse() {
    const newResponseInput = document.getElementById("new-response");
    const newAnswerInput = document.getElementById("new-answer");

    const newResponse = newResponseInput.value.trim().toLowerCase();
    const newAnswer = newAnswerInput.value.trim();

    if (newResponse !== "" && newAnswer !== "") {
        // Add the new response to the responses object
        responses[newResponse] = newAnswer;

        // Save responses to local storage
        localStorage.setItem('chatbotResponses', JSON.stringify(responses));

        // Clear the input fields
        newResponseInput.value = "";
        newAnswerInput.value = "";

        // Log the updated responses object (for demonstration purposes)
        console.log(responses);
    }
}


</script>

</body>
</html>
